# {%= name %} {%= badge("fury") %}

> {%= description %}

## Usage

```js
var glob = require('{%= name %}')({ gitignore: true });
var files = glob.readdirSync('**/*.js');
```

See [more examples](#examples):

- [glob.readdir](#async)
- glob.readPromise
- [glob.readStream](#stream)
- [glob.readdirSync](#sync)


## Table of contents

<!-- toc -->

## Install
{%= include("install-npm", {save: true}) %}


## Usage

**Params**

All "read" methods take a glob pattern and an `options` object. Examples:

```js
// sync
var files = glob.readdirSync('*.js', {});

// async
glob.readdir('*.js', {}, function(err, files) {

});

// stream
glob.readdirStream('*.js', {})
  .on('data', function(file) {

  });

// promise (TODO)
glob.readPromise()
```

// pass "global" options to the top-level export

## API
{%= apidocs("./lib/readers.js") %}
{%= apidocs("index.js") %}

## Middleware

glob-fs uses middleware to add file matching or exclusion capabilities, or other features that features, , 

**What is a middleware?**

A middleware is a function that "processes" files as they're read from the file system by glob-fs.

**What does "process" mean?**


matches, excludes, or modifies

glob-fs uses middleware to process files and to handle matching, ignoring and directory recursion. 

A middleware function should return a function that:

- receives a `file` object
- returns a `file` object


A "middleware" - to glob-fs - is just a function that is called by glob-fs each  Most users might not have a need for custom middleware, but for those who do

**Why use middleware for globbing?**

First and foremost, this approach provides more power, flexibility, control, and usability.

It's also very easy to create custom middleware if you need a feature or some kind of matching that would be considered an edge case. 

As an added bonus, the middleware approach will result in **much faster globbing for most users**. Mostly due to the fact that only the most common use cases will be handled in `glob-fs` by default, leaving edge cases and special functionaly to separate libraries and middleware. 

That said, if you use glob-fs and think "why isn't '%^#%' included by defaul?!", [please create an issue]({%= bugs.url %})! The goal is to add default middlewares and tweak the middleware-handler logic until most users would view the defaults as sane.

**All middleware is sync**

All middleware runs synchronously in the order in which it's defined by the user.

### Middleware example

```js
// `notests` middleware to exclude any file in the `test` directory
function tests(options) {
  return function(file) {
    if (/^test\//.test(file.dirname)) {
      file.exclude = true;
    }
    return file;
  };
}

// usage
var glob = glob({ gitignore: true })
  .use(tests())

// get files
glob.readdirStream('**/*')
  .on('data', function (file) {
    console.log(file.path);
  })
```


## Related projects
{%= related(['micromatch', 'braces', 'fill-range', 'is-glob']) %}  

## Running tests
{%= include("tests") %}

## Contributing
{%= include("contributing") %}

## Examples

### async


### promise


### stream

```js
var glob = require('{%= name %}')({ gitignore: true });

glob.readdirStream('**/*')
  .on('data', function (file) {
    console.log(file.path);
  })
```

### sync




### Middleware conventions

- **Naming**: any middleware published to npm should be prefixed with `glob-fs-`, as in: `glob-fs-dotfiles`.
- **Keywords**: please add `glob-fs` to the keywords array in package.json
- **Options**: all middleware should return a function that takes an `options` object, as in the [Middleware Example](#middleware-example)
- **Return `file`**: all middleware should return the `file` object after processing. 

## [node-glob] comparison

_(TODO)_

## TODO

- [ ] Multiple pattern support
- [ ] Negation patterns (might not do this, since it can be handled in middleware)
- [x] middleware
- [x] middleware handler
- [ ] externalize middleware to modules ([prs welcome!](#contributing))
- [x] events
- [x] unit tests (need to be moved)
- [x] sync iterator
- [x] async iterator
- [x] stream iterator
- [ ] promise iterator
- [x] glob.readdir (async)
- [x] glob.readdirSync
- [x] glob.readdirStream
- [ ] glob.readdirPromise
- [ ] clean up `./lib`

## Author
{%= include("author") %}

## License
{%= copyright() %}
{%= license() %}

***

{%= include("footer") %}

[node-glob]: https://github.com/isaacs/node-glob/